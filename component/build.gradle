

plugins {
	
	id 'org.springframework.boot' version '2.2.6.RELEASE'
	id 'java'
  id 'checkstyle' 
  id 'jacoco'
	id "org.sonarqube" version "2.7.1"
}

sonarqube {
    properties {
		property "sonar.host.url","https://sonarcloud.io"
    property "sonar.sourceEncoding", "UTF-8"
		property "sonar.login", "43983a01ea79d77e7ce4931e989733cdcfb6ef47"
		property "sonar.projectKey", "Bank"
		property "sonar.organization" , "steinko-github"
    property "sonar.coverage.jacoco.xmlReportPaths", "build/reports/jacoco/test/jacocoTestReport.xml"
    property "sonar.sources", "src/main/java"
		property "sonar.tests", "src/test/java"
		property "sonar.java.source", "14"
		}
}


group = 'org.steinko'

repositories {
	mavenCentral()
	maven { url "http://dl.bintray.com/epam/reportportal" } 
}



dependencies {

	implementation 'org.springframework.boot:spring-boot-starter-web:2.2.7.RELEASE'
	implementation 'org.springframework.boot:spring-boot-starter-data-jpa:2.2.7.RELEASE'
  implementation 'io.springfox:springfox-swagger2:2.9.2'
  implementation 'io.springfox:springfox-swagger-ui:2.9.2'
	implementation 'com.epam.reportportal:logger-java-log4j:4.0.1'
  implementation 'org.apache.logging.log4j:log4j-core:2.13.1'
  implementation 'org.apache.logging.log4j:log4j-api:2.13.1'
  implementation 'net.logstash.logback:logstash-logback-encoder:6.3'



	runtimeOnly 'com.h2database:h2:1.4.200'

	testImplementation 'io.rest-assured:spring-mock-mvc:4.3.0'
	testImplementation('org.springframework.boot:spring-boot-starter-test:2.2.7.RELEASE') 

	testCompile group: 'org.jboss.arquillian', name: 'arquillian-bom', version: '1.7.0.Alpha1', ext: 'pom'
	testImplementation 'org.jboss.arquillian.junit:arquillian-junit-container:1.7.0.Alpha1'
	testImplementation 'org.arquillian.cube:arquillian-cube-docker:1.18.2'
  testImplementation 'org.arquillian.cube:assertj-docker-java:1.18.2'
  testImplementation 'org.assertj:assertj-core:3.16.1'

	testImplementation 'com.epam.reportportal:agent-java-junit5:4.0.3'
  testImplementation 'com.tngtech.archunit:archunit:0.13.1'

}
	 
test {
	useJUnitPlatform()
}

task myJavadocs(type: Javadoc) {
  source = sourceSets.main.allJava
}


jacocoTestReport {
    reports {
        xml.enabled true
    }
}

project.tasks["sonarqube"].dependsOn "jacocoTestReport"
test.finalizedBy jacocoTestReport

checkstyleTest.enabled = false
